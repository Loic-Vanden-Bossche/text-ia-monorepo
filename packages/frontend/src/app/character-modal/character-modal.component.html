<nb-card [nbSpinner]="loading" nbSpinnerSize="giant" nbSpinnerStatus="primary" class="card-container">
  <nb-card-header>
    <div class="title">
      <h3>Character generation</h3>
      <button (click)="generateCharacter()" nbButton status="primary"><nb-icon icon="sync-outline"></nb-icon>Generate new</button>
    </div>
  </nb-card-header>
  <nb-card-body>
    <div *ngIf="character">
      <app-character-details [character]="character"></app-character-details>
      <nb-card class="context-card">
        <nb-card-header class="context-card-header">
          <h4>Dialog context</h4>
          <nb-select (selectedChange)="onSelectContext($event)" placeholder="Select dialog context" hero status="success">
            <nb-option-group *ngFor="let group of contextGroups" [title]="group.name | titlecase">
              <nb-option *ngFor="let context of group.contexts" [value]="context">{{context.name | lowercase}}</nb-option>
            </nb-option-group>
          </nb-select>
        </nb-card-header>
        <nb-card-body>
          {{ selectedContext?.description || 'No context selected.'}}
        </nb-card-body>
      </nb-card>
    </div>
  </nb-card-body>
  <nb-card-footer>
    <button [disabled]="!selectedContext" (click)="createCharacterAndDialog()" nbButton status="primary"><nb-icon icon="plus-square-outline"></nb-icon>Create dialog</button>
  </nb-card-footer>
</nb-card>
