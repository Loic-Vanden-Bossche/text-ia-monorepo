<nb-layout>

  <nb-layout-header fixed>
    <button class="return-button" (click)="return()" nbButton status="primary"><nb-icon icon="arrow-back-outline"></nb-icon>Return</button>
    <button (click)="resetDialog()" nbButton status="primary"><nb-icon icon="sync-outline"></nb-icon>Reset dialog</button>
  </nb-layout-header>

  <nb-layout-column>
    <nb-chat [style]="{height: '80vh'}" [title]="currentDialog?.context?.description || 'Dialog'">
      <nb-chat-message *ngFor="let msg of messages"
                       [type]="msg.type"
                       [message]="msg.text"
                       [reply]="msg.reply"
                       [sender]="msg.user.name"
                       [date]="msg.date"
                       [files]="msg.files"
                       [quote]="msg.quote"
                       [latitude]="msg.latitude"
                       [longitude]="msg.longitude"
                       [avatar]="msg.user.avatar">
      </nb-chat-message>

      <nb-chat-form (send)="sendMessage($event)" [dropFiles]="true">
      </nb-chat-form>
    </nb-chat>
  </nb-layout-column>

  <nb-layout-footer fixed>
  </nb-layout-footer>

</nb-layout>
